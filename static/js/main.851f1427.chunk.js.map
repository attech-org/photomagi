{"version":3,"sources":["redux/app/types.ts","redux/app/actions.ts","App.tsx","redux/app/reducer.ts","redux/store.ts","index.tsx"],"names":["AppActions","general","css","rotate","Wrapper","styled","Layout","Content","props","FighterCard","Card","FighterCardMeta","Meta","StyledFighterImage","Image","FightersPanel","Space","ControlPanel","Arena","Img","img","RotatedImg","HP","div","WinPanel","WinnerName","sleep","ms","Promise","resolve","setTimeout","App","dispatch","useDispatch","fighters","useSelector","store","app","useState","selectedFighters","onSelectedFightersChange","fighter1","fighter2","onFightersChange","isFighting","onFightingStateChange","winnerName","onWinnerNameChange","useEffect","map","name","find","el","kick","attacker","defencer","a","kickValue","attack","defense","tempDefencer","health","Math","floor","fetchUsers","fetch","result","json","data","value","type","SET_FIGHTERS","payload","aria-expanded","direction","src","onClick","align","alt","source","percent","showInfo","length","aria-colindex","indexOf","fighterName","includes","filter","cover","title","description","disabled","danger","size","initialStore","counter","action","INC_COUNTER","DEC_COUNTER","rootReducer","combineReducers","middlewares","push","thunk","createStore","applyMiddleware","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.851f1427.chunk.js","sourcesContent":["import { Fighter } from './reducer';\n\nexport enum AppActions {\n  INC_COUNTER = 'INC_COUNTER',\n  DEC_COUNTER = 'DEC_COUNTER',\n  SET_FIGHTERS = 'SET_FIGHTERS',\n}\n\ninterface IncreaseCounterAction {\n  type: AppActions.INC_COUNTER;\n  payload: number;\n}\n\ninterface DecreaseCounterAction {\n  type: AppActions.DEC_COUNTER;\n  payload: number;\n}\n\ninterface AddFightersAction {\n  type: AppActions.SET_FIGHTERS;\n  payload: Fighter[];\n}\n\nexport type AppActionTypes = IncreaseCounterAction | DecreaseCounterAction | AddFightersAction;\n","import { Dispatch } from 'react';\n\nimport { Fighter } from './reducer';\nimport { AppActionTypes, AppActions } from './types';\n\nexport const increaseCounter = (value: number): AppActionTypes => ({\n  type: AppActions.INC_COUNTER,\n  payload: value,\n});\n\nexport const decreaseCounter = (value: number): AppActionTypes => ({\n  type: AppActions.DEC_COUNTER,\n  payload: value,\n});\n\nexport const setFighters = (value: Fighter[]): AppActionTypes => ({\n  type: AppActions.SET_FIGHTERS,\n  payload: value,\n});\n\nexport const loadFighters = () => async (dispatch: Dispatch<AppActionTypes>) => {\n  const result = await fetch(\n    'https://gist.githubusercontent.com/alexandrtovmach/3fcf6c0819d6830e21b5f3c117c2c5aa/raw/0b00273489dbf90980296d0908183fc3494c2ad4/userlist.json',\n  );\n  const data = await result.json();\n  dispatch(setFighters(data));\n};\n","/* eslint-disable no-nested-ternary */\nimport { Button, Card, Divider, Image, Layout, Progress, Space } from 'antd';\nimport { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport styled, { css } from 'styled-components';\n\nimport { loadFighters } from './redux/app/actions';\nimport { AppStore, Fighter } from './redux/app/reducer';\nimport { RootStore } from './redux/store';\n\nconst general = css`\n  .ant-card-body {\n    background-color: white;\n  }\n`;\n\nconst rotate = css`\n  .ant-space-item {\n    .ant-image-img {\n      height: 300px;\n    }\n    &:last-of-type {\n      .ant-image-img {\n        transform: rotateY(180deg);\n      }\n    }\n  }\n`;\n\nconst Wrapper = styled(Layout)`\n  ${general}\n  height: 100vh;\n`;\n\nconst Content = styled(Layout.Content)`\n  background: ${(props) => `${\n    props['aria-expanded'] ? 'linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), ' : ''\n  }\n      url('https://cutewallpaper.org/21/street-fighter-background/Street-Fighter-background-Street-fighter-characters-.jpg')\n    `};\n  background-size: auto 100%;\n  background-position: center;\n  overflow: auto;\n  padding: 5rem;\n`;\n\nconst FighterCard = styled(Card)`\n  margin: 1rem;\n  background-color: rgba(238, 130, 238, 0.4);\n  width: 200px;\n  box-shadow: ${(props) => {\n    if (props['aria-colindex'] === 0) {\n      return '0 0 0 5px blue';\n    }\n    if (props['aria-colindex'] === 1) {\n      return '0 0 0 5px green';\n    }\n    return 'none';\n  }};\n`;\n\nconst FighterCardMeta = styled(Card.Meta)``;\n\nconst StyledFighterImage = styled(Image)`\n  height: 150px;\n  width: auto;\n  margin: 1rem auto;\n`;\n\nconst FightersPanel = styled(Space)`\n  width: 100%;\n  min-height: 200px;\n  overflow-x: auto;\n  background-color: wheat;\n`;\n\nconst ControlPanel = styled(Space)`\n  width: 100%;\n  overflow-x: auto;\n  background-color: wheat;\n  padding: 1rem;\n  display: flex;\n  justify-content: center;\n`;\n\nconst Arena = styled(Space)`\n  ${rotate}\n  width: 100%;\n  display: flex;\n  justify-content: space-around;\n  align-items: flex-end;\n  height: 80vh;\n`;\n\nconst Img = styled.img``;\n\nconst RotatedImg = styled(Img)`\n  transform: rotateY(180deg);\n`;\n\nconst HP = styled.div`\n  background-color: red;\n  padding: 0 0.5rem;\n  border-radius: 5px;\n  display: flex;\n  align-items: center;\n  width: 300px;\n`;\n\nconst WinPanel = styled(Space)`\n  width: 100%;\n  align-items: center;\n`;\n\nconst WinnerName = styled.div`\n  font-size: 60px;\n  color: orange;\n  font-weight: bold;\n  text-align: center;\n`;\n\nconst sleep = (ms: number) =>\n  new Promise((resolve) => {\n    setTimeout(resolve, ms);\n  });\n\nconst App: React.FunctionComponent = () => {\n  const dispatch = useDispatch();\n  const fighters = useSelector<RootStore, AppStore['fighters']>((store) => store.app.fighters);\n  const [selectedFighters, onSelectedFightersChange] = useState<string[]>([]); // done\n  const [[fighter1, fighter2], onFightersChange] = useState<Fighter[]>([]);\n  const [isFighting, onFightingStateChange] = useState<boolean>(false); // done\n  const [winnerName, onWinnerNameChange] = useState<string>(''); // done\n\n  useEffect(() => {\n    onFightersChange(\n      selectedFighters.map((name) => fighters.find((el) => el.name === name) as Fighter),\n    );\n  }, [selectedFighters]);\n\n  const kick = async (attacker: Fighter, defencer: Fighter) => {\n    await sleep(1000);\n    const kickValue = attacker.attack * (defencer.defense / 3);\n    const tempDefencer: Fighter = {\n      ...defencer,\n      health: Math.floor(defencer.health - kickValue),\n    };\n    if (tempDefencer.health <= 0) {\n      onWinnerNameChange(attacker.name);\n      onFightingStateChange(false);\n    } else {\n      kick(tempDefencer, attacker);\n    }\n    onFightersChange(\n      [fighter1, fighter2].map((el) => (el.name === tempDefencer.name ? tempDefencer : attacker)),\n    );\n  };\n\n  useEffect(() => {\n    if (isFighting) {\n      kick(fighter1, fighter2);\n    }\n  }, [isFighting]);\n\n  const fetchUsers = async () => {\n    dispatch(loadFighters());\n  };\n\n  const handleFightClick = () => onFightingStateChange(!isFighting);\n\n  const handleFighterClick = (fighterName: string) => {\n    if (selectedFighters.length < 2) {\n      onSelectedFightersChange([...selectedFighters, fighterName]);\n    }\n    if (selectedFighters.includes(fighterName)) {\n      onSelectedFightersChange(selectedFighters.filter((name) => name !== fighterName));\n    }\n  };\n\n  const handleNewFight = () => {\n    onWinnerNameChange('');\n    onSelectedFightersChange([]);\n    onFightersChange([]);\n  };\n\n  return (\n    <Wrapper>\n      <Content aria-expanded={!isFighting}>\n        {winnerName ? (\n          <WinPanel direction=\"vertical\">\n            <Img src=\"https://pngimage.net/wp-content/uploads/2018/06/ko-png-3.png\" />\n            <WinnerName>{winnerName}</WinnerName>\n            <Button onClick={handleNewFight}>Start new fight</Button>\n          </WinPanel>\n        ) : isFighting ? (\n          <Arena align=\"center\">\n            <Space direction=\"vertical\">\n              <Img alt=\"example\" src={fighter1.source} />\n              <HP>\n                <Progress\n                  percent={\n                    100 *\n                    (fighter1.health /\n                      (fighters.find((el) => el.name === fighter1.name)?.health || 100))\n                  }\n                  showInfo={false}\n                />\n              </HP>\n            </Space>\n            <Space direction=\"vertical\">\n              <RotatedImg alt=\"example\" src={fighter2.source} />\n              <HP>\n                <Progress\n                  percent={\n                    100 *\n                    (fighter2.health /\n                      (fighters.find((el) => el.name === fighter2.name)?.health || 100))\n                  }\n                  showInfo={false}\n                />\n              </HP>\n            </Space>\n          </Arena>\n        ) : (\n          <FightersPanel>\n            {fighters.length ? (\n              fighters.map(({ name, source, attack, defense, health }) => (\n                <FighterCard\n                  key={name}\n                  aria-colindex={selectedFighters.indexOf(name)}\n                  onClick={() => handleFighterClick(name)}\n                  cover={<StyledFighterImage alt=\"example\" src={source} />}\n                >\n                  <FighterCardMeta\n                    title={name}\n                    description={`Attack: ${attack} Defence: ${defense} Health: ${health}`}\n                  />\n                </FighterCard>\n              ))\n            ) : (\n              <Button onClick={fetchUsers}>Load fighters</Button>\n            )}\n          </FightersPanel>\n        )}\n        <Divider />\n        {!isFighting && !winnerName && (\n          <ControlPanel>\n            <Button\n              onClick={handleFightClick}\n              disabled={selectedFighters.length < 2}\n              type=\"primary\"\n              danger\n              size=\"large\"\n            >\n              Fight!\n            </Button>\n          </ControlPanel>\n        )}\n      </Content>\n    </Wrapper>\n  );\n};\n\nexport default App;\n","import { AppActionTypes, AppActions } from './types';\n\nexport interface Fighter {\n  attack: number;\n  defense: number;\n  health: number;\n  name: string;\n  source: string;\n}\n\nexport interface AppStore {\n  counter: number;\n  fighters: Fighter[];\n}\n\nconst initialStore: AppStore = {\n  counter: 0,\n  fighters: [],\n};\n\nconst app = (store = initialStore, action: AppActionTypes) => {\n  switch (action.type) {\n    case AppActions.INC_COUNTER:\n      return { ...store, counter: store.counter + action.payload };\n    case AppActions.DEC_COUNTER:\n      return { ...store, counter: store.counter - action.payload };\n    case AppActions.SET_FIGHTERS:\n      return { ...store, fighters: action.payload };\n    default:\n      return store;\n  }\n};\n\nexport default app;\n","import { createStore, applyMiddleware, combineReducers } from 'redux';\nimport logger from 'redux-logger';\nimport thunk from 'redux-thunk';\n\nimport app from './app/reducer';\n\nconst rootReducer = combineReducers({\n  app,\n});\n\nconst middlewares = [];\n\nmiddlewares.push(thunk);\n\nif (process.env.NODE_ENV === 'development') {\n  middlewares.push(logger);\n}\n\nexport default createStore(rootReducer, applyMiddleware(...middlewares));\n\nexport type RootStore = ReturnType<typeof rootReducer>;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport App from './App';\nimport store from './redux/store';\n\nimport 'antd/dist/antd.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}